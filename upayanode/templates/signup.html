{%load static%}



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="csrf-token" content="{{ csrf_token }}">
  <title>UpayaNode â€“ Create Anonymous Identity</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'CSS/signup.css' %}" />
</head>
<body>

  <!-- HEADER -->
  <header class="auth-header">
    <a href="{% url 'index' %}" class="logo-mark">
      <svg width="30" height="30" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="18" cy="18" r="16" stroke="#fff" stroke-width="2.5"/>
        <circle cx="18" cy="18" r="6" fill="#fff"/>
        <line x1="18" y1="2" x2="18" y2="12" stroke="#fff" stroke-width="2.5" stroke-linecap="round"/>
        <line x1="18" y1="24" x2="18" y2="34" stroke="#fff" stroke-width="2.5" stroke-linecap="round"/>
        <line x1="2" y1="18" x2="12" y2="18" stroke="#fff" stroke-width="2.5" stroke-linecap="round"/>
        <line x1="24" y1="18" x2="34" y2="18" stroke="#fff" stroke-width="2.5" stroke-linecap="round"/>
      </svg>
      <span>UpayaNode</span>
    </a>
    <a href="{% url 'signin' %}" class="header-link">Already have a passphrase? <strong>Sign In</strong></a>
  </header>

  <!-- MAIN -->
  <main class="auth-main">
    <div class="auth-card" id="authCard">

      <!-- Step indicator -->
      <div class="steps">
        <div class="step active" id="step1dot"><span>1</span></div>
        <div class="step-line"></div>
        <div class="step" id="step2dot"><span>2</span></div>
        <div class="step-line"></div>
        <div class="step" id="step3dot"><span>3</span></div>
      </div>

      <!-- STEP 1 â€” Generate -->
      <div class="step-panel active" id="panel1">
        <div class="card-icon">ğŸ²</div>
        <h1 class="card-title">Generate Your Passphrase</h1>
        <p class="card-sub">We'll create a unique passphrase for you. This is your only key â€” no email, no name, no trace. Not even we know who you are.</p>

        <div class="passphrase-box" id="passphraseBox">
          <span class="passphrase-text" id="passphraseText">â€” â€” â€” â€” â€”</span>
          <button class="copy-btn" id="copyBtn" title="Copy passphrase" disabled>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            <span id="copyLabel">Copy</span>
          </button>
        </div>

        <button class="btn-generate" id="generateBtn">
          <span class="btn-icon">âœ¦</span> Generate My Passphrase
        </button>

        <div class="warning-box" id="warningBox" style="display:none;">
          <span class="warn-icon">âš ï¸</span>
          <p><strong>Save this before continuing.</strong> Write it down or store it somewhere safe. If you lose it, there is no way to recover your account â€” we hold nothing on you.</p>
        </div>

        <button class="btn-primary" id="toStep2" style="display:none;">
          I've Saved It â€” Continue <span>â†’</span>
        </button>
      </div>

      <!-- STEP 2 â€” Confirm -->
      <div class="step-panel" id="panel2">
        <div class="card-icon">ğŸ”</div>
        <h1 class="card-title">Confirm Your Passphrase</h1>
        <p class="card-sub">Type your passphrase back in to make sure you've got it right. This is the last time we show you any help.</p>

        <div class="form-group">
          <label for="confirmInput">Enter Your Passphrase</label>
          <div class="input-wrap">
            <input type="text" id="confirmInput" placeholder="word-word-word-word-word" autocomplete="off" spellcheck="false" />
            <button class="eye-btn" id="eyeBtn" title="Toggle visibility">ğŸ‘</button>
          </div>
          <span class="input-hint" id="matchHint"></span>
        </div>

        <button class="btn-primary" id="toStep3" disabled>
          Confirm & Create Identity <span>â†’</span>
        </button>

        <button class="btn-ghost" id="backTo1">â† Generate a different one</button>
      </div>

      <!-- STEP 3 â€” Done -->
      <div class="step-panel" id="panel3">
        <div class="card-icon success-icon">âœ“</div>
        <h1 class="card-title">You're In.</h1>
        <p class="card-sub">Your anonymous identity has been created. No name. No email. No trace. Just you â€” and the community.</p>

        <div class="identity-reveal">
          <span class="id-label">Your Node ID</span>
          <span class="id-value" id="nodeId">Node #----</span>
          <span class="id-note">This label appears nowhere public. It's just a session reference.</span>
        </div>

        <a href="{% url 'home' %}" class="btn-primary" id="enterBtn">
          Enter UpayaNode <span>â†’</span>
        </a>
      </div>

    </div>

    <!-- Side note -->
    <div class="auth-note">
      <p>ğŸ”’ <strong>Zero-knowledge design.</strong> Your passphrase is hashed before storage. We cannot read it, reverse it, or link it to any real identity.</p>
    </div>

  </main>

  <!-- FOOTER -->
  <footer class="auth-footer">
    <p>Â© 2025 UpayaNode &nbsp;Â·&nbsp; <a href="#">Privacy</a> &nbsp;Â·&nbsp; <a href="#">Terms</a></p>
  </footer>

  <script src="{% static 'JS/signup.js' %}"></script>
</body>
</html>